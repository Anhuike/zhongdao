(global["webpackJsonp"] = global["webpackJsonp"] || []).push([["pages/pay/pay"],{

/***/ 228:
/*!**************************************************************************!*\
  !*** C:/Users/宇文诺/Desktop/zhongdao/main.js?{"page":"pages%2Fpay%2Fpay"} ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(createPage) {__webpack_require__(/*! uni-pages */ 4);__webpack_require__(/*! @dcloudio/uni-stat */ 5);

var _vue = _interopRequireDefault(__webpack_require__(/*! vue */ 2));
var _pay = _interopRequireDefault(__webpack_require__(/*! ./pages/pay/pay.vue */ 229));function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}
createPage(_pay.default);
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */ 1)["createPage"]))

/***/ }),

/***/ 229:
/*!*******************************************************!*\
  !*** C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pay.vue?vue&type=template&id=60858ab0&scoped=true& */ 230);
/* harmony import */ var _pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pay.vue?vue&type=script&lang=js& */ 232);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */ 14);

var renderjs




/* normalize component */

var component = Object(_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"],
  _pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"],
  false,
  null,
  "60858ab0",
  null,
  false,
  _pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"],
  renderjs
)

/* hot reload */
if (false) { var api; }
component.options.__file = "C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue"
/* harmony default export */ __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 230:
/*!**************************************************************************************************!*\
  !*** C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue?vue&type=template&id=60858ab0&scoped=true& ***!
  \**************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=template&id=60858ab0&scoped=true& */ 231);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "render", function() { return _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["render"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["staticRenderFns"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["recyclableRender"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "components", function() { return _E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_template_id_60858ab0_scoped_true___WEBPACK_IMPORTED_MODULE_0__["components"]; });



/***/ }),

/***/ 231:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue?vue&type=template&id=60858ab0&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "staticRenderFns", function() { return staticRenderFns; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "recyclableRender", function() { return recyclableRender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
var components
var render = function() {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  var m0 = Number(_vm.allData.amount)
  _vm.$mp.data = Object.assign(
    {},
    {
      $root: {
        m0: m0
      }
    }
  )
}
var recyclableRender = false
var staticRenderFns = []
render._withStripped = true



/***/ }),

/***/ 232:
/*!********************************************************************************!*\
  !*** C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue?vue&type=script&lang=js& ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay.vue?vue&type=script&lang=js& */ 233);
/* harmony import */ var _E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== 'default') (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));
 /* harmony default export */ __webpack_exports__["default"] = (_E_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_E_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_pay_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default.a); 

/***/ }),

/***/ 233:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/宇文诺/Desktop/zhongdao/pages/pay/pay.vue?vue&type=script&lang=js& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;








































































































var _api = _interopRequireDefault(__webpack_require__(/*! ../../api/api */ 16));
var _fc = _interopRequireDefault(__webpack_require__(/*! ../../assets/js/fc */ 234));
var _vuex = __webpack_require__(/*! vuex */ 1127);function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}function _objectSpread(target) {for (var i = 1; i < arguments.length; i++) {var source = arguments[i] != null ? arguments[i] : {};var ownKeys = Object.keys(source);if (typeof Object.getOwnPropertySymbols === 'function') {ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {return Object.getOwnPropertyDescriptor(source, sym).enumerable;}));}ownKeys.forEach(function (key) {_defineProperty(target, key, source[key]);});}return target;}function _defineProperty(obj, key, value) {if (key in obj) {Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true });} else {obj[key] = value;}return obj;}var loading = function loading() {return Promise.all(/*! import() | pages/template/loading */[__webpack_require__.e("common/vendor"), __webpack_require__.e("pages/template/loading")]).then(__webpack_require__.bind(null, /*! ../template/loading */ 1311));};var tip = function tip() {return __webpack_require__.e(/*! import() | pages/template/tip */ "pages/template/tip").then(__webpack_require__.bind(null, /*! ../template/tip */ 1319));};var _default =

{
  data: function data() {
    return {
      //  请求的数据
      order_id: "",
      code: "",
      use_money: 0,

      // 渲染的数据
      loading: false,
      tipshow: false,
      tips: "",
      allData: null,
      over_time: {},
      check_show: false, // 是否显示余额支付复选框
      is_money: false, // 是否使用过余额抵扣
      money: 0, // 余额抵扣的钱
      need_money: 0, // 还需支付的钱
      alipay_tip: false,

      is_wechat: window.__CFG.IN_WEIXIN };

  },
  beforeRouteEnter: function beforeRouteEnter(to, from, next) {
    console.log(vm, '接受');
    next(function (vm) {
      var order_id = vm.$route.query.order_id;
      var pay = vm.pay;

      // 如果是从支付页面返回的
      if (from.path == "/") {
        vm.$router.push({
          path: "/willing/orderdetail?order_id=" + order_id });

        // 如果是商品详情或者订单列表或者订单详情返回的
      } else {
        if (pay) {
          // window.__CFG.SITEURL
          var rebackurl = window.__CFG.SITEURL + '/willing/pay?order_id=' + order_id;
          var payUrl = window.__CFG.SITEURL + '/trade/payment/order-' + order_id + "?rebackurl=" + rebackurl;
          window.location.href = payUrl;
        } else {
          if (from.path == "/willing/alllist") {
            vm.$router.push({
              path: "/willing/home?pay=1" });

          } else if (from.path == "/willing/home") {
            vm.$router.push({
              path: "/willing/home?pay=1" });

          } else {
            vm.$router.push({
              path: "/willing/alllist" });

          }

        }
      }
    });
  },
  beforeRouteLeave: function beforeRouteLeave(to, from, next) {
    if (this.interval) {
      clearInterval(this.interval);
      this.interval = null;
    }
    if (this.pay_timer) {
      clearTimeout(this.pay_timer);
      this.pay_timer = null;
    }
    next();
  },
  //     	mounted () {
  //             document.title = "支付";
  //     		this.apiData();
  //     	},
  destroyed: function destroyed() {
    if (this.interval) {
      clearInterval(this.interval);
      this.interval = null;
    }
    if (this.pay_timer) {
      clearTimeout(this.pay_timer);
      this.pay_timer = null;
    }
  },
  computed: _objectSpread({},
  (0, _vuex.mapGetters)([
  "pay"])),


  methods: {
    /**
              * 请求数据
              * */
    apiData: function apiData() {var _this = this;
      var that = this;
      var params = {
        order_id: that.order_id };

      that.loading = true;
      _api.default.prePay(params, function (res) {
        that.loading = false;
        if (Number(res.error)) {
          _api.default.tipload(that, res.message, true);
        } else {
          that.allData = res.data;
          that.setOverTime();
          that.setMoney();
          _this.initCode();
        }
        that.required = true;
      });
    },
    initCode: function initCode() {var _this2 = this;
      this.allData.payment.forEach(function (v, i) {
        if (_this2.check_show) {
          if (!_this2.code && v.payment != "money") {
            _this2.code = v.payment;
          }
        } else {
          !_this2.code && (_this2.code = v.payment);
        }
      });
    },
    /**
        * 设置余额支付复选框的显示
        * */
    setMoney: function setMoney() {
      // 已经使用过余额抵扣
      if (Number(this.allData.money)) {
        this.check_show = true;
        this.is_money = true;
        this.use_money = 1;
        this.money = Number(this.allData.money);
        if (this.is_money) {
          this.need_money = Number(this.allData.amount);
        } else {
          this.need_money = _fc.default.printNum(Number(this.allData.amount), this.money, "subtract");
        }
        return;
      }
      // 如果当前的支付金额大于账户余额且没有使用过余额抵扣
      if (Number(this.allData.amount) > Number(this.allData.member_money) && !Number(this.allData.money)) {
        this.check_show = true;
        this.need_money = _fc.default.printNum(Number(this.allData.amount), Number(this.allData.member_money), "subtract");
        this.use_money = 1;
        this.money = Number(this.allData.member_money);
        return;
      }
      // 如果当前的支付金额小于账户余额且没有使用过余额抵扣
      if (Number(this.allData.amount) <= Number(this.allData.member_money) && !Number(this.allData.money)) {
        this.need_money = Number(this.allData.amount);
      }
    },
    /**
        * 使用余额抵扣
        * */
    useMoney: function useMoney() {
      if (!Number(this.allData.can_mixed_money)) {
        _api.default.tipload(this, "暂不支持余额抵扣");
        return;
      }

      // 使用了余额抵扣
      if (this.use_money) {
        this.use_money = 0;
        this.money = 0;
        this.need_money = Number(this.allData.amount);
        // 没使用余额抵扣
      } else {
        this.use_money = 1;
        this.money = Number(this.allData.member_money);
        this.need_money = _fc.default.printNum(Number(this.allData.amount), Number(this.allData.member_money), "subtract");
      }
    },
    /**
        * 点击支付方式
        * */
    handleType: function handleType(value) {
      if (value == "money" && !Number(this.allData.can_use_money)) {
        _api.default.tipload(this, "暂不支持余额支付");
        return;
      }
      this.code = value;
    },
    /**
        * 设置支付到期时间
        * */
    setOverTime: function setOverTime() {var _this3 = this;
      var lTime = new Date().getTime() + Number(this.allData.pay_end_time) * 1000;
      this.interval = setInterval(function () {
        var time = new Date().getTime();
        var dis = lTime - time;
        if (dis <= 0) {
          clearInterval(_this3.interval);
          _this3.interval = null;
          _this3.$router.replace({
            path: "/willing/orderdetail?order_id=".concat(_this3.order_id) });

          return;
        }
        var seconds = Math.floor(dis / 1000 % 60);
        var minutes = Math.floor(dis / 1000 / 60);
        _this3.over_time = {
          minutes: minutes,
          seconds: seconds };

      }, 50);
    },
    /**
        * 支付
        * */
    pay: function pay() {
      var that = this;
      if (that.code == "wxpay" && !Number(that.is_wechat)) {
        _api.default.tipload(that, "请用微信浏览器打开此页面");
        return;
      }
      if (that.code == "alipay" && Number(that.is_wechat)) {
        that.alipay_tip = true;
        return;
      }

      var params = {
        "order_id": that.order_id,
        "code": that.code,
        "use_money": that.use_money };

      that.loading = true;
      _api.default.pay(params, function (res) {
        that.loading = false;
        _api.default.tipload(that, res.message);
        if (!Number(res.error)) {
          // 余额支付
          if (that.code == "money") {
            that.pay_timer = setTimeout(function () {
              that.$router.replace({
                path: "/willing/orderdetail?order_id=".concat(that.order_id) });

            }, 1500);
          }
          // 微信支付
          if (that.code == "wxpay") {var
            onBridgeReady = function onBridgeReady() {
              WeixinJSBridge.invoke('getBrandWCPayRequest', res.data.trade,
              function (res) {
                if (res.err_msg == "get_brand_wcpay_request:ok") {
                  that.$router.replace({
                    path: "/willing/orderdetail?order_id=".concat(that.order_id) });

                }
              });
            };
            if (typeof WeixinJSBridge == "undefined") {
              if (document.addEventListener) {
                document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
              } else if (document.attachEvent) {
                document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
                document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
              }
            } else {
              onBridgeReady();
            }
          }
          // 支付宝支付
          if (that.code == "alipay") {
            window.location.replace(res.data.trade);
          }
        }
      });
    },
    wxPay: function wxPay(trade) {
      var that = this;
      function onBridgeReady() {
        WeixinJSBridge.invoke('getBrandWCPayRequest', {
          "appId": trade.appid, //公众号名称，由商户传入     
          "timeStamp": trade.timestamp, //时间戳，自1970年以来的秒数     
          "nonceStr": trade.noncestr, //随机串     
          "package": trade.package,
          "signType": trade.sign_string, //微信签名方式：     
          "paySign": trade.sign //微信签名 
        },
        function (res) {
          if (res.err_msg == "get_brand_wcpay_request:ok") {
            that.$router.replace({
              path: "/willing/orderdetail?order_id=".concat(that.order_id) });

          }
        });
      }
      if (typeof WeixinJSBridge == "undefined") {
        if (document.addEventListener) {
          document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
        } else if (document.attachEvent) {
          document.attachEvent('WeixinJSBridgeReady', onBridgeReady);
          document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
        }
      } else {
        onBridgeReady();
      }
    },
    alipay: function alipay(trade) {
      window.location.replace(trade.notify_url);
    },
    hideAplipay: function hideAplipay() {
      this.alipay_tip = false;
    } },

  components: {
    loading: loading,
    tip: tip } };exports.default = _default;

/***/ })

},[[228,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/pay/pay.js.map